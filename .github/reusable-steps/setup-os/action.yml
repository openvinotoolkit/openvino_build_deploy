name: OS setup

runs:
  using: 'composite'
  steps:
    - name: Free space (Ubuntu only)
      if: runner.os == 'Linux'
      uses: jlumbroso/free-disk-space@v1.3.1
      with:
        tool-cache: false
        swap-storage: false
        large-packages: false
        
        android: true
        dotnet: true
        haskell: true
        docker-images: true
    - name: Install OpenCL and EGL (Ubuntu only)
      if: runner.os == 'Linux'
      shell: bash
      run: |
        sudo apt-get update
        sudo apt-get install -y mesa-utils libegl1-mesa libegl1-mesa-dev ocl-icd-opencl-dev
    - name: Install coreutils (macOS only)
      if: runner.os == 'macOS'
      shell: bash
      run: |
        brew install coreutils

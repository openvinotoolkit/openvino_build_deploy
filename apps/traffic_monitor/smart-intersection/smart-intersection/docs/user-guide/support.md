# Get Help

This page provides comprehensive support and troubleshooting information for the Smart Intersection Sample Application. It is divided into the following sections:

  - **Common Issues**: General troubleshooting steps for resolving issues like container failures, port conflicts, and missing dependencies.
  - **Troubleshooting Docker Deployments**: Steps to address problems specific to Docker deployments.
  - **Troubleshooting Helm Deployments**: Guidance for resolving issues in Helm-based deployments.

## Troubleshooting Common Issues

### 1. Containers Not Starting
- **Issue**: The application containers fail to start.
- **Solution**:

  ```bash
  docker compose logs
  ```
  Check the logs for errors and resolve dependency issues.

### 2. Port Conflicts
- **Issue**: Port conflicts with other running applications.
- **Solution**: Update the ports section in the Docker Compose file.

### 3. Missing Dependencies
- **Issue**: Required software dependencies are not installed.
- **Solution**:

  ```bash
  sudo apt-get install -y <dependency>
  ```

## Troubleshooting Docker Deployments

### 1. Containers Failing To Start:
   - Check the Docker logs for errors:
     ```bash
     docker compose logs
     ```
### 2. Port Conflicts:
   - Update the `ports` section in the Compose file to resolve conflicts.
### 3. Reset Application:
   - Follow these steps to reset the application to the initial state
     ```bash
     docker compose down
     docker volume ls | grep smart-intersection | awk '{ print $2 }' | xargs docker volume rm
     ```
### 4. Cleanup secrets:
   - Follow these steps to re-generate the secrets:
     ```bash
     rm ./src/secrets/browser.auth
     ```
   - Then repeat Step 2 **Setup Credentials and Download Assets** in [Get Started](./get-started.md)
### 5. Can't access application in remote host
   - Update the firewall to receive request to port 443
     ```bash
     sudo ufw allow 443/tcp
     ```
   - Stop other services that might be running in port 443 (e.g. Kubernetes Load Balancer)
### 6. Services scene or web fails to start
   - On first starts, `scene` or `web` might fail to start due to a timeout on waiting for `pgserver` initialization to be ready. Restart the services with:
     ```bash
     docker compose up -d scene web
     ```
### 7. Grafana shows No data when accessed remotely
   - This issue occurs when there is a time synchronization mismatch between the system running the application and the system accessing Grafana through a browser. Grafana relies on timestamps to display data, and if the clocks on the two systems are not synchronized, it may result in no data being shown.
   - Use Grafana's time range filter to adjust the displayed time range. Set it to match the timestamp of the data being generated by the application. This ensures that the data falls within the selected time range and becomes visible in the dashboard.
   - This adjustment is particularly useful when the systems are in different time zones or have slight clock differences
### 8. Application UI shows No objects detected on scene
  - This issue occurs when the scene controller is unable to establish a connection with the message broker. Ensure that the broker service is running and accessible, and verify the network configuration to allow communication between the scene controller and the broker.
  - Inspect the logs of the scene controller with:
    ```bash
    docker compose logs scene
    ```
  - When the scene controller can't connect to the broker, the following log lines are shown:
    ```
    Starting scene controller
    Broker broker.scenescape.intel.com online: [Errno 111] Connection refused
    Broker broker.scenescape.intel.com online: [Errno 111] Connection refused
    Broker broker.scenescape.intel.com online: Connecting
    ```
  - To address this issue, restart the scene controller:
    ```bash
    docker compose down scene
    docker compose up -d scene
    ```
  - Then verify that the container is ready:
    ```
    Broker broker.scenescape.intel.com online: Connecting
    Broker broker.scenescape.intel.com online: 0
    Took 1 seconds
    Container is ready
    ```
  - Now the Application UI should show objects detected on scene.

  **Note**: For Helm deployments, use the equivalent commands to inspect logs and restart the scene controller. For example:
  
  - Inspect the logs:
    ```bash
    kubectl logs pod/<scene-pod-name> -n smart-intersection
    ```
  - Restart the scene controller:
    ```bash
    kubectl delete pod/<scene-pod-name> -n smart-intersection
    ```

## Troubleshooting Helm Deployments

### 1. Helm Chart Not Found:

   - Check if the Helm repository was added:

     ```bash
     helm repo list
     ```

### 2. Pods Not Running:

   - Review pod logs:

     ```bash
     kubectl logs {{pod-name}} -n {{namespace}}
     ```

### 3. Service Unreachable:

   - Confirm the service configuration:

     ```bash
     kubectl get svc -n {{namespace}}
     ```

<!--
## Support
- **Developer Forum**: Join the community forum
- **Contact Support**: [Support Page](#)
-->
